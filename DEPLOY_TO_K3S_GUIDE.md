# à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£ Deploy "All Check List Dashboard" à¸‚à¸¶à¹‰à¸™ K3s (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ ArgoCD)

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸ˆà¸°à¸­à¸˜à¸´à¸šà¸²à¸¢à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸™à¸³ Web Application à¸™à¸µà¹‰à¹„à¸›à¸£à¸±à¸™à¸šà¸™ K3s à¹‚à¸”à¸¢à¸”à¸¶à¸‡ Configuration à¸•à¸£à¸‡à¸ˆà¸²à¸ GitHub à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£ Docker Image à¹à¸šà¸š Manual

---

## 1. à¸§à¸´à¸˜à¸µ Build à¹à¸¥à¸° Import Image (à¸ªà¸³à¸„à¸±à¸!) ğŸ³

à¹€à¸™à¸·à¹ˆà¸­à¸‡à¸ˆà¸²à¸ K3s à¸šà¸²à¸‡à¸„à¸£à¸±à¹‰à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸š Docker Hub à¹€à¸£à¸²à¸ˆà¸¶à¸‡à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰à¸§à¸´à¸˜à¸µ **"Build à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸£à¸² -> Save à¹€à¸›à¹‡à¸™à¹„à¸Ÿà¸¥à¹Œ -> à¹€à¸­à¸²à¹„à¸› Import à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ Server"**

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1.1: Build à¸šà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“ (Windows/Mac)
à¹€à¸›à¸´à¸” Terminal à¹ƒà¸™à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ à¹à¸¥à¹‰à¸§à¸£à¸±à¸™:
```powershell
# 1. à¸ªà¸£à¹‰à¸²à¸‡ Image (à¸•à¸±à¹‰à¸‡à¸Šà¸·à¹ˆà¸­ tag à¹ƒà¸«à¹‰à¸Šà¸±à¸”à¹€à¸ˆà¸™ à¹€à¸Šà¹ˆà¸™ v1)
docker build -t link-dashboard:v1 .

# 2. à¹à¸›à¸¥à¸‡ Image à¹€à¸›à¹‡à¸™à¹„à¸Ÿà¸¥à¹Œ .tar à¹€à¸à¸·à¹ˆà¸­à¹€à¸•à¸£à¸µà¸¢à¸¡à¸‚à¸™à¸¢à¹‰à¸²à¸¢
docker save -o link-dashboard-v1.tar link-dashboard:v1
```
*à¸•à¸­à¸™à¸™à¸µà¹‰à¸„à¸¸à¸“à¸ˆà¸°à¹„à¸”à¹‰à¹„à¸Ÿà¸¥à¹Œ `link-dashboard-v1.tar` à¹ƒà¸™à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ*

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1.2: à¸ªà¹ˆà¸‡à¹„à¸Ÿà¸¥à¹Œà¹„à¸›à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ Server K3s
à¹ƒà¸Šà¹‰à¹‚à¸›à¸£à¹à¸à¸£à¸¡ Copy à¹„à¸Ÿà¸¥à¹Œ (à¹€à¸Šà¹ˆà¸™ SCP, FileZilla, à¸«à¸£à¸·à¸­ WinSCP) à¸ªà¹ˆà¸‡à¹„à¸Ÿà¸¥à¹Œ `.tar` à¹„à¸›à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ Server

```powershell
# à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰ scp (à¸–à¹‰à¸²à¸£à¸¹à¹‰ IP server)
scp link-dashboard-v1.tar user@192.168.1.xxx:~/
```

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1.3: Import à¹€à¸‚à¹‰à¸² K3s (à¸—à¸³à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ Server)
SSH à¹€à¸‚à¹‰à¸²à¹„à¸›à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ Server à¹à¸¥à¹‰à¸§à¸£à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸™à¸³à¹€à¸‚à¹‰à¸²:

```bash
# à¸™à¸³à¹€à¸‚à¹‰à¸² Image à¸ªà¸¹à¹ˆ K3s
sudo k3s ctr images import link-dashboard-v1.tar
```

**à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¹€à¸‚à¹‰à¸²à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡:**
```bash
sudo k3s ctr images list | grep link-dashboard
# à¸•à¹‰à¸­à¸‡à¹€à¸ˆà¸­ link-dashboard:v1
```

---

## 2. à¸§à¸´à¸˜à¸µà¸­à¸±à¸›à¹€à¸”à¸•à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ (Deploy) ğŸš€

à¹€à¸¡à¸·à¹ˆà¸­ Import Image à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§ à¹ƒà¸«à¹‰à¸—à¸³à¸•à¸²à¸¡à¸™à¸µà¹‰à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2.1: à¹à¸à¹‰à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¹ƒà¸™ Git
1.  à¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸­à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“ à¹à¸à¹‰à¹„à¸Ÿà¸¥à¹Œ `k3s/manifests.yaml`
    *   à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸šà¸£à¸£à¸—à¸±à¸” `image:` à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¹ƒà¸«à¸¡à¹ˆà¸—à¸µà¹ˆà¸„à¸¸à¸“à¹€à¸à¸´à¹ˆà¸‡ Import (à¹€à¸Šà¹ˆà¸™ `link-dashboard:v1`)
2.  Push à¸‚à¸¶à¹‰à¸™ GitHub:
    ```bash
    git add k3s/manifests.yaml
    git commit -m "Udpate to v1"
    git push origin pord
    ```

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2.2: à¸ªà¸±à¹ˆà¸‡ Deploy à¸šà¸™ Server
à¸à¸¥à¸±à¸šà¹„à¸›à¸—à¸µà¹ˆà¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ Server K3s à¹à¸¥à¹‰à¸§à¸£à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¹ƒà¸«à¹‰à¸”à¸¶à¸‡ Config à¹ƒà¸«à¸¡à¹ˆà¸ˆà¸²à¸ GitHub:

```bash
kubectl apply -f https://raw.githubusercontent.com/Khomsan146/allexcel/pord/k3s/manifests.yaml
```

à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰ Pod à¸£à¸µà¸ªà¸•à¸²à¸£à¹Œà¸—à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸šà¸„à¹ˆà¸²à¹ƒà¸«à¸¡à¹ˆà¸—à¸±à¸™à¸—à¸µ (à¸à¸£à¸“à¸µ Config à¹„à¸¡à¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸•à¹ˆà¹à¸à¹‰à¹‚à¸„à¹‰à¸”):
```bash
kubectl rollout restart deployment/link-dashboard
```

---

## à¸ªà¸£à¸¸à¸› Loop à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™
1.  **à¹à¸à¹‰ Code** -> `docker build` -> `docker save`
2.  **Copy à¹„à¸Ÿà¸¥à¹Œ** à¹„à¸› Server -> `k3s ctr images import`
3.  **à¹à¸à¹‰ Version** à¹ƒà¸™ YAML -> `git push`
4.  **Deploy** -> `kubectl apply`
